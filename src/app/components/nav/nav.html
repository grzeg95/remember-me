<div class="logo">
  <div class="logo-label">Remember Me</div>
  <div class="logo-img">
    <img [src]="_isDarkMode() ? 'assets/imgs/logo-dark.svg' : 'assets/imgs/logo.svg'" alt="logo">
  </div>
</div>

<div class="app-nav-actions">
  @if (_userInitialized()) {
    @if (_userLoggedIn()) {
      <button
        [cdkMenuTriggerFor]="userMenu"
        [cdkMenuPosition]="[{offsetY: 2, originX: 'end', originY: 'bottom', overlayX: 'end', overlayY: 'top'}]"
        class="app-nav-menu-button user-button"
      >

        @if (_firestoreUser()?.photoUrl) {
          <img class="" [src]="_firestoreUser()?.photoUrl"/>
        } @else {
          <fa-icon [icon]="_faUser"></fa-icon>
        }

      </button>
    } @else {
      <button app-button (click)="_toggleTheme()">
        <img [src]="_isDarkMode() ? '/assets/imgs/sun.svg' : '/assets/imgs/moon.svg'" alt="search">
      </button>
      <button app-button [cdkMenuTriggerFor]="signInMenu" [cdkMenuPosition]="[{offsetY: 2, originX: 'end', originY: 'bottom', overlayX: 'end', overlayY: 'top'}]" >Sign In</button>
    }
  }
</div>

<ng-template #signInMenu>
  <div class="app-nav-menu" cdkMenu animate.enter="enter-animation">
    <button class="app-nav-menu-button" cdkMenuItem (click)="signInWithGoogle()"><fa-icon [icon]="faGoogle"></fa-icon>Google</button>
    <button class="app-nav-menu-button" cdkMenuItem (click)="openAuthDialog()"><fa-icon [icon]="faAt"></fa-icon>Email</button>
    <button class="app-nav-menu-button" cdkMenuItem (click)="signInAnonumously()"><fa-icon [icon]="faEyeSlash"></fa-icon>Incognito</button>
  </div>
</ng-template>

<ng-template #userMenu>
  <div class="app-nav-menu" cdkMenu animate.enter="enter-animation">
    <button class="app-nav-menu-button" cdkMenuItem (click)="_toggleTheme()">
      @if (_isDarkMode()) {
        <svg class="moon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M7.45003 0.18639C7.33075 0.0670459 7.16886 0 7.00008 0C6.83131 0 6.66944 0.0670459 6.5501 0.18639C6.43076 0.305732 6.36372 0.467593 6.36372 0.636364V1.27273C6.36372 1.44151 6.43076 1.60337 6.5501 1.72271C6.66944 1.84205 6.83131 1.9091 7.00008 1.9091C7.16886 1.9091 7.33075 1.84205 7.45003 1.72271C7.56939 1.60337 7.63644 1.44151 7.63644 1.27273V0.636364C7.63644 0.467593 7.56939 0.305732 7.45003 0.18639ZM1.90915 1.27288C1.74041 1.27288 1.57858 1.3399 1.45924 1.4592C1.33994 1.57853 1.27292 1.74037 1.27292 1.90911C1.27292 2.07785 1.33994 2.23968 1.45924 2.35902L2.41379 3.31356C2.5338 3.42948 2.69456 3.49363 2.86141 3.49218C3.02826 3.49073 3.18787 3.4238 3.30586 3.30581C3.42384 3.18783 3.49077 3.02822 3.49222 2.86137C3.49367 2.69451 3.42953 2.53377 3.31361 2.41375L2.35906 1.4592C2.23973 1.3399 2.07789 1.27288 1.90915 1.27288ZM12.7271 1.90911C12.7271 1.74037 12.6601 1.57853 12.5408 1.4592C12.4215 1.3399 12.2596 1.27288 12.0909 1.27288C11.9222 1.27288 11.7604 1.3399 11.641 1.4592L10.6865 2.41375C10.6257 2.47245 10.5772 2.54267 10.5438 2.62031C10.5105 2.69795 10.493 2.78145 10.4922 2.86595C10.4914 2.95045 10.5076 3.03424 10.5395 3.11245C10.5715 3.19066 10.6188 3.26171 10.6785 3.32145C10.7383 3.38121 10.8093 3.42846 10.8876 3.46046C10.9658 3.49245 11.0496 3.50855 11.134 3.50782C11.2186 3.50709 11.302 3.48953 11.3797 3.45618C11.4574 3.42283 11.5275 3.37435 11.5863 3.31356L12.5408 2.35902C12.6601 2.23968 12.7271 2.07785 12.7271 1.90911ZM0.186387 6.55002C0.0670452 6.66936 0 6.83122 0 6.99999C0 7.16876 0.0670452 7.33065 0.186387 7.44993C0.305728 7.56929 0.467589 7.63634 0.636368 7.63634H1.27273C1.4415 7.63634 1.60336 7.56929 1.72271 7.44993C1.84205 7.33065 1.90909 7.16876 1.90909 6.99999C1.90909 6.83122 1.84205 6.66936 1.72271 6.55002C1.60336 6.43068 1.4415 6.36363 1.27273 6.36363H0.636368C0.467589 6.36363 0.305728 6.43068 0.186387 6.55002ZM12.2773 6.55002C12.1579 6.66936 12.0909 6.83122 12.0909 6.99999C12.0909 7.16876 12.1579 7.33065 12.2773 7.44993C12.3966 7.56929 12.5585 7.63634 12.7273 7.63634H13.3636C13.5324 7.63634 13.6943 7.56929 13.8137 7.44993C13.9329 7.33065 14 7.16876 14 6.99999C14 6.83122 13.9329 6.66936 13.8137 6.55002C13.6943 6.43068 13.5324 6.36363 13.3636 6.36363H12.7273C12.5585 6.36363 12.3966 6.43068 12.2773 6.55002ZM3.49989 11.1364C3.49989 10.9677 3.43287 10.8059 3.31357 10.6865C3.19424 10.5672 3.0324 10.5002 2.86366 10.5002C2.69492 10.5002 2.53309 10.5672 2.41376 10.6865L1.45921 11.6411C1.34329 11.7611 1.27914 11.9218 1.28059 12.0887C1.28204 12.2556 1.34897 12.4152 1.46696 12.5331C1.58494 12.6511 1.74455 12.718 1.9114 12.7195C2.07826 12.7209 2.239 12.6568 2.35903 12.5409L3.31357 11.5863C3.43287 11.467 3.49989 11.3051 3.49989 11.1364ZM11.1364 10.5002C10.9677 10.5002 10.8059 10.5672 10.6865 10.6865C10.5672 10.8059 10.5002 10.9677 10.5002 11.1364C10.5002 11.3051 10.5672 11.467 10.6865 11.5863L11.6411 12.5409C11.761 12.6568 11.9218 12.7209 12.0886 12.7195C12.2555 12.718 12.4152 12.6511 12.5331 12.5331C12.6511 12.4152 12.718 12.2556 12.7195 12.0887C12.7209 11.9218 12.6568 11.7611 12.5409 11.6411L11.5863 10.6865C11.4669 10.5672 11.3051 10.5002 11.1364 10.5002ZM7.45003 12.2773C7.33075 12.158 7.16886 12.091 7.00008 12.091C6.83131 12.091 6.66944 12.158 6.5501 12.2773C6.43076 12.3967 6.36372 12.5585 6.36372 12.7273V13.3637C6.36372 13.5324 6.43076 13.6943 6.5501 13.8137C6.66944 13.933 6.83131 14.0001 7.00008 14.0001C7.16886 14.0001 7.33075 13.933 7.45003 13.8137C7.56939 13.6943 7.63644 13.5324 7.63644 13.3637V12.7273C7.63644 12.5585 7.56939 12.3967 7.45003 12.2773ZM4.75017 4.75012C5.34687 4.15342 6.15619 3.81819 7.00006 3.81819C7.8439 3.81819 8.65328 4.15342 9.24998 4.75012C9.84669 5.34683 10.1819 6.15614 10.1819 7.00001C10.1819 7.84391 9.84669 8.65322 9.24998 9.24992C8.65328 9.84663 7.8439 10.1819 7.00006 10.1819C6.15619 10.1819 5.34687 9.84663 4.75017 9.24992C4.15346 8.65322 3.81823 7.84391 3.81823 7.00001C3.81823 6.15614 4.15346 5.34683 4.75017 4.75012Z"/>
        </svg>
        Light
      } @else {
        <svg class="sun" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5672 9.0541C12.9268 8.8861 13.3554 9.2081 13.2054 9.58609C12.1818 12.1761 9.72578 14 6.85791 14C3.07009 14 0 10.8181 0 6.89269C0 3.58793 2.17664 0.80971 5.12466 0.0140458C5.50704 -0.0886205 5.7578 0.393603 5.54896 0.742043C5.00322 1.65124 4.71395 2.7062 4.71507 3.78315C4.71507 6.97281 7.20938 9.55809 10.2868 9.55809C11.0717 9.55949 11.8484 9.38786 12.5672 9.0541ZM8.67858 0.708617C8.41897 0.296402 8.88374 -0.195155 9.27351 0.0801778L9.96842 0.570176C10.2502 0.768948 10.5813 0.87503 10.9199 0.87503C11.2586 0.87503 11.5897 0.768948 11.8714 0.570176L12.5656 0.0801778C12.9561 -0.195155 13.4209 0.296402 13.1606 0.708617L12.6973 1.44361C12.5093 1.74164 12.409 2.09183 12.409 2.45006C12.409 2.80828 12.5093 3.15849 12.6973 3.4565L13.1606 4.1915C13.4209 4.60372 12.9561 5.09527 12.5664 4.81994L11.8714 4.32994C11.5897 4.13117 11.2586 4.02509 10.9199 4.02509C10.5813 4.02509 10.2502 4.13117 9.96842 4.32994L9.27421 4.81994C8.88445 5.09527 8.41897 4.60372 8.67858 4.1915L9.14185 3.4565C9.32981 3.15849 9.43005 2.80828 9.43005 2.45006C9.43005 2.09183 9.32981 1.74164 9.14185 1.44361L8.67858 0.708617Z"/>
        </svg>
        Dark
      }
    </button>
    <button class="app-nav-menu-button" cdkMenuItem (click)="_openSettings()">Settings</button>
    <button class="app-nav-menu-button" cdkMenuItem (click)="_signOut()">Sing out</button>
  </div>
</ng-template>
